(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-rectify-confirm-rectify-confirm"],{"579f":function(t,e,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d81d"),a("14d9"),a("ac1f"),a("00b4"),a("caad"),a("e9c4"),a("2532");var i=n(a("c7eb")),o=n(a("5530")),s=n(a("1da1")),r=n(a("5e48")),f=n(a("376a")),u=n(a("717f")),l=n(a("78e5")),c={components:{ZFilterTabs:r.default,ZFormRadio:f.default,ZFormTextarea:l.default,ZFormUpload:u.default},data:function(){return{rectifyResults:[{label:"达标",value:1},{label:"不达标",value:0}],filterList:[],questionList:null,inspectType:"0",showIndex:0,params:{},inspectCode:"",nickName:""}},onLoad:function(t){this.params=t,this.getDetail(),this.nickName=getApp().globalData.user.nickname},methods:{changeTabs:function(t){var e=t.item,a=(e.num,e.value);this.inspectType=a,this.showIndex=a},getDetail:function(){var t=this;return(0,s.default)((0,i.default)().mark((function e(){var a,n,s;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=(0,o.default)((0,o.default)({},t.params),{},{inspecttype:"0"}),e.next=3,uni.$u.api.supervise.queryBoothMarketDetail(a);case 3:n=e.sent,s=n.data,t.inspectCode=s.inspectcode,t.filterList=[],s.problemList.map((function(e,a){e.inspectproblemstatus="",e.confirmreason="",t.filterList.push({name:"问题".concat(e.sortnum||1),num:"".concat(["待整改","待复核","不达标"][e.inspectproblemtype]),value:a})})),t.questionList=s.problemList;case 9:case"end":return e.stop()}}),e)})))()},submit:function(){var t=this;return(0,s.default)((0,i.default)().mark((function e(){var a,n,s;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=[],n="",t.questionList.map((function(t,e){var i=t.inspectproblemstatus,o=t.confirmreason;"1"==i||"0"==i&&o?a.push(1):""!==i||o?(""===i||"0"==i&&!o)&&(a.push(2),n=t.sortnum):a.push(3),uni.$u.test.isEmojiCharacter(t.confirmreason)&&(uni.$u.toast("问题 ".concat(t.sortnum,"中存在表情符号")),a.push(4))})),!a.includes(4)){e.next=5;break}return e.abrupt("return");case 5:if(!a.includes(2)){e.next=8;break}return uni.$u.toast("请完善问题".concat(n)),e.abrupt("return");case 8:if(a.includes(1)||a.includes(2)){e.next=11;break}return uni.$u.toast("请至少确认一个问题"),e.abrupt("return");case 11:return s=(0,o.default)((0,o.default)({},t.params),{},{inspectcode:t.inspectCode,inspectproblemlist:JSON.stringify(t.questionList)}),e.next=14,uni.$u.api.supervise.updateBoothMarketInspect(s);case 14:e.sent,uni.navigateBack();case 16:case"end":return e.stop()}}),e)})))()}}};e.default=c},"5a44":function(t,e,a){"use strict";a.r(e);var n=a("579f"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},8015:function(t,e,a){var n=a("f939");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("77bdbcf8",n,!0,{sourceMap:!1,shadowMode:!1})},8162:function(t,e,a){"use strict";var n=a("8015"),i=a.n(n);i.a},ba63:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var n={zFilterTabs:a("5e48").default,uGap:a("4fadb").default,zFormReadonly:a("b8ca").default,zFormRadio:a("376a").default,zFormTextarea:a("78e5").default,zFormUpload:a("717f").default,uSkeleton:a("5cbe").default,uButton:a("e1f0").default,uSafeBottom:a("54120").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"main-wrap"},[a("list",{staticClass:"main-content"},[a("cell",[a("v-uni-text",{staticClass:"title-text"},[t._v("巡查问题")])],1),a("header",[a("z-filter-tabs",{ref:"filter",attrs:{list:t.filterList,isFilter:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTabs.apply(void 0,arguments)}}}),a("u-gap",{attrs:{height:"10","bg-color":"#f2f3f5"}})],1),t.questionList&&t.questionList.length>0?t._l(t.questionList,(function(e,n){return a("cell",{key:n},[t.showIndex==n?[a("v-uni-view",{staticClass:"question-title-block"},[a("v-uni-view",{staticClass:"question-title-box"},[a("v-uni-text",{staticClass:"question-title-text"},[t._v("问题"+t._s(e.sortnum))])],1)],1),e.boothname?a("z-form-readonly",{attrs:{label:"巡查摊位",content:e.boothname,"border-bottom":!0}}):t._e(),e.inspectproblemreason?a("z-form-readonly",{attrs:{label:"存在问题",content:e.inspectproblemreason,"border-bottom":!0}}):t._e(),a("z-form-readonly",{attrs:{label:"问题图片","border-bottom":!0,type:"image",images:e.inspectproblemimage}}),e.inspectproblemfinishreason?a("z-form-readonly",{attrs:{label:"整改说明",content:e.inspectproblemfinishreason,"content-type":"success","border-bottom":!0}}):t._e(),e.inspectproblemfinishimage?a("z-form-readonly",{attrs:{label:"整改图片",type:"image",images:e.inspectproblemfinishimage}}):t._e(),a("z-form-radio",{attrs:{options:t.rectifyResults,label:"整改结果","border-bottom":!0,required:!0},model:{value:e.inspectproblemstatus,callback:function(a){t.$set(e,"inspectproblemstatus",a)},expression:"item.inspectproblemstatus"}}),a("z-form-textarea",{attrs:{label:"确认说明",placeholder:"请输入整改说明","border-bottom":!0,required:"0"==e.inspectproblemstatus},model:{value:e.confirmreason,callback:function(a){t.$set(e,"confirmreason",a)},expression:"item.confirmreason"}}),a("z-form-upload",{attrs:{label:"整改确认图片"},model:{value:e.confirmpic,callback:function(a){t.$set(e,"confirmpic",a)},expression:"item.confirmpic"}}),a("z-form-readonly",{attrs:{label:"确认人",content:t.nickName}})]:t._e(),a("u-gap",{attrs:{height:"10"}})],2)})):t._e(),t.questionList?t._e():a("cell",[a("v-uni-view",{staticClass:"loading-box"},[a("u-skeleton",{attrs:{rows:"15",rowsWidth:"'702rpx'",loading:!0}})],1)],1)],2),a("v-uni-view",{staticClass:"bottom-btn-block"},[a("u-button",{attrs:{text:"全部提交"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}}),a("u-safe-bottom")],1)],1)},o=[]},d627:function(t,e,a){"use strict";a.r(e);var n=a("ba63"),i=a("5a44");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("8162");var s=a("f0c5"),r=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"07fa4574",null,!1,n["a"],void 0);e["default"]=r.exports},f939:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */.text-10[data-v-07fa4574]{font-size:%?10?%}.text-12[data-v-07fa4574]{font-size:%?12?%}.text-14[data-v-07fa4574]{font-size:%?14?%}.text-16[data-v-07fa4574]{font-size:%?16?%}.text-18[data-v-07fa4574]{font-size:%?18?%}.text-20[data-v-07fa4574]{font-size:%?20?%}.text-22[data-v-07fa4574]{font-size:%?22?%}.text-24[data-v-07fa4574]{font-size:%?24?%}.text-26[data-v-07fa4574]{font-size:%?26?%}.text-28[data-v-07fa4574]{font-size:%?28?%}.text-30[data-v-07fa4574]{font-size:%?30?%}.text-32[data-v-07fa4574]{font-size:%?32?%}.text-34[data-v-07fa4574]{font-size:%?34?%}.text-36[data-v-07fa4574]{font-size:%?36?%}.text-38[data-v-07fa4574]{font-size:%?38?%}.text-40[data-v-07fa4574]{font-size:%?40?%}.text-42[data-v-07fa4574]{font-size:%?42?%}.text-44[data-v-07fa4574]{font-size:%?44?%}.text-46[data-v-07fa4574]{font-size:%?46?%}.text-48[data-v-07fa4574]{font-size:%?48?%}.text-50[data-v-07fa4574]{font-size:%?50?%}.main-wrap[data-v-07fa4574]{flex:1}.main-content[data-v-07fa4574]{flex:1}.title-text[data-v-07fa4574]{line-height:%?90?%;padding:0 %?24?%;font-size:%?32?%;font-weight:700;color:#222}.question-list-block[data-v-07fa4574]{margin-top:%?10?%;background-color:#fff}.question-title-block[data-v-07fa4574]{padding:0 %?24?%;background-color:#fff}.question-title-box[data-v-07fa4574]{border-bottom:1px solid #ededed;display:flex;flex-direction:row;align-items:center;justify-content:space-between;height:%?80?%}.question-title-text[data-v-07fa4574]{font-size:%?32?%;font-weight:700;color:#222}.bottom-btn-block[data-v-07fa4574]{padding:%?20?% %?30?%;background-color:#fff;border-top:1px solid #e6e6e6}.loading-box[data-v-07fa4574]{height:%?1000?%;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#fff;padding:%?30?% %?24?%}',""]),t.exports=e}}]);